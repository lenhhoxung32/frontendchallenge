"use strict";var Ut=Object.defineProperty,Et=Object.defineProperties,It=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,Pe=(E,Z,C)=>Z in E?Ut(E,Z,{enumerable:!0,configurable:!0,writable:!0,value:C}):E[Z]=C,B=(E,Z)=>{for(var C in Z||(Z={}))Nt.call(Z,C)&&Pe(E,C,Z[C]);if(Ne)for(var C of Ne(Z))Pt.call(Z,C)&&Pe(E,C,Z[C]);return E},je=(E,Z)=>Et(E,It(Z));(self.webpackChunkinteractive_comments_section=self.webpackChunkinteractive_comments_section||[]).push([[862],{8862:(E,Z,C)=>{C.r(Z),C.d(Z,{CommentsModule:()=>St});var M=C(6019),S=C(9133),c=C(501);const V=(0,c.PH)("[Comments/API] Load Comment Success",(0,c.Ky)()),ee=(0,c.PH)("[Comments/API] Load Comment Failure",(0,c.Ky)()),te=(0,c.PH)("[Comments/API] Delete Comment Success",(0,c.Ky)()),ne=((0,c.PH)("[Comments/API] Delete Comment Failure",(0,c.Ky)()),(0,c.PH)("[Comments/API] Add Comment Success",(0,c.Ky)())),De=(0,c.PH)("[Comments/API] Add Comment Failure",(0,c.Ky)()),oe=(0,c.PH)("[Comments/API] Add Reply Success",(0,c.Ky)()),Je=(0,c.PH)("[Comments/API] Add Reply Failure",(0,c.Ky)()),ie=(0,c.PH)("[Comments/API] Edit Comment Success",(0,c.Ky)()),Fe=(0,c.PH)("[Comments/API] Edit Comment Failure",(0,c.Ky)()),se=(0,c.PH)("[Comments/API] Up Score Success",(0,c.Ky)()),Be=(0,c.PH)("[Comments/API] Up Score Failure",(0,c.Ky)()),re=(0,c.PH)("[Comments/API] Down Score Success",(0,c.Ky)()),ke=(0,c.PH)("[Comments/API] Down Score Failure",(0,c.Ky)()),me=(0,c.PH)("[Comments Page] Enter"),$=(0,c.PH)("[Comments Page] Set Delete Id",(0,c.Ky)()),ce=(0,c.PH)("[Comments Page] Delete Comment",(0,c.Ky)()),ae=(0,c.PH)("[Comments Page] Add Comment",(0,c.Ky)()),le=(0,c.PH)("[Comments Page] Add Reply",(0,c.Ky)()),ue=(0,c.PH)("[Comments Page] Edit Comment",(0,c.Ky)()),de=(0,c.PH)("[Comments Page] Up Score ",(0,c.Ky)()),pe=(0,c.PH)("[Comments Page] Down Score ",(0,c.Ky)());function Y(t,s,n){return[...n.slice(0,t),s,...n.slice(t+1)]}var e=C(1514),d=(()=>{return(t=d||(d={}))[t.EntitiesOnly=0]="EntitiesOnly",t[t.Both=1]="Both",t[t.None=2]="None",d;var t})();function v(t){return function(n,o){const i={ids:[...o.ids],entities:B({},o.entities)},r=t(n,i);return r===d.Both?Object.assign({},o,i):r===d.EntitiesOnly?je(B({},o),{entities:i.entities}):o}}function I(t,s){const n=s(t);return(0,e.X6Q)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",s.toString()),n}function fe(t){function s(g,l){const a=I(g,t);return a in l.entities?d.None:(l.ids.push(a),l.entities[a]=g,d.Both)}function n(g,l){let a=!1;for(const m of g)a=s(m,l)!==d.None||a;return a?d.Both:d.None}function i(g,l){const a=I(g,t);return a in l.entities?(l.entities[a]=g,d.EntitiesOnly):(l.ids.push(a),l.entities[a]=g,d.Both)}function b(g,l){const m=(g instanceof Array?g:l.ids.filter(u=>g(l.entities[u]))).filter(u=>u in l.entities).map(u=>delete l.entities[u]).length>0;return m&&(l.ids=l.ids.filter(u=>u in l.entities)),m?d.Both:d.None}function P(g,l){return j([g],l)}function j(g,l){const a={};return(g=g.filter(u=>u.id in l.entities)).length>0?g.filter(f=>function(g,l,a){const u=Object.assign({},a.entities[l.id],l.changes),f=I(u,t),y=f!==l.id;return y&&(g[l.id]=f,delete a.entities[l.id]),a.entities[f]=u,y}(a,f,l)).length>0?(l.ids=l.ids.map(f=>a[f]||f),d.Both):d.EntitiesOnly:d.None}function Q(g,l){const a=[],m=[];for(const y of g){const T=I(y,t);T in l.entities?m.push({id:T,changes:y}):a.push(y)}const u=j(m,l),f=n(a,l);switch(!0){case f===d.None&&u===d.None:return d.None;case f===d.Both||u===d.Both:return d.Both;default:return d.EntitiesOnly}}return{removeAll:function(g){return Object.assign({},g,{ids:[],entities:{}})},addOne:v(s),addMany:v(n),setAll:v(function(g,l){return l.ids=[],l.entities={},n(g,l),d.Both}),setOne:v(i),setMany:v(function(g,l){const a=g.map(m=>i(m,l));switch(!0){case a.some(m=>m===d.Both):return d.Both;case a.some(m=>m===d.EntitiesOnly):return d.EntitiesOnly;default:return d.None}}),updateOne:v(P),updateMany:v(j),upsertOne:v(function(g,l){return Q([g],l)}),upsertMany:v(Q),removeOne:v(function(g,l){return b([g],l)}),removeMany:v(b),map:v(function(g,l){return j(l.ids.reduce((u,f)=>{const y=g(l.entities[f]);return y!==l.entities[f]&&u.push({id:f,changes:y}),u},[]).filter(({id:u})=>u in l.entities),l)}),mapOne:v(function({map:g,id:l},a){const m=a.entities[l];return m?P({id:l,changes:g(m)},a):d.None})}}const A=function(t={}){const{selectId:s,sortComparer:n}=B({sortComparer:!1,selectId:p=>p.id},t),o={getInitialState:function(s={}){return Object.assign({ids:[],entities:{}},s)}},i={getSelectors:function(s){const n=p=>p.ids,o=p=>p.entities,i=(0,c.P1)(n,o,(p,b)=>p.map(w=>b[w])),r=(0,c.P1)(n,p=>p.length);return s?{selectIds:(0,c.P1)(s,n),selectEntities:(0,c.P1)(s,o),selectAll:(0,c.P1)(s,i),selectTotal:(0,c.P1)(s,r)}:{selectIds:n,selectEntities:o,selectAll:i,selectTotal:r}}},r=n?function(t,s){const{removeOne:n,removeMany:o,removeAll:i}=fe(t);function r(a,m){return p([a],m)}function p(a,m){const u=a.filter(f=>!(I(f,t)in m.entities));return 0===u.length?d.None:(l(u,m),d.Both)}function w(a,m){const u=I(a,t);return u in m.entities?(m.ids=m.ids.filter(f=>f!==u),l([a],m),d.Both):r(a,m)}function P(a,m){return q([a],m)}function q(a,m){const u=[],f=a.filter(y=>function(a,m,u){if(!(m.id in u.entities))return!1;const y=Object.assign({},u.entities[m.id],m.changes),T=I(y,t);return delete u.entities[m.id],a.push(y),T!==m.id}(u,y,m)).length>0;if(0===u.length)return d.None;{const y=m.ids,T=[];return m.ids=m.ids.filter((U,F)=>U in m.entities||(T.push(F),!1)),l(u,m),!f&&T.every(U=>m.ids[U]===y[U])?d.EntitiesOnly:d.Both}}function g(a,m){const u=[],f=[];for(const U of a){const F=I(U,t);F in m.entities?f.push({id:F,changes:U}):u.push(U)}const y=q(f,m),T=p(u,m);switch(!0){case T===d.None&&y===d.None:return d.None;case T===d.Both||y===d.Both:return d.Both;default:return d.EntitiesOnly}}function l(a,m){a.sort(s);const u=[];let f=0,y=0;for(;f<a.length&&y<m.ids.length;){const T=a[f],U=I(T,t),F=m.ids[y];s(T,m.entities[F])<=0?(u.push(U),f++):(u.push(F),y++)}m.ids=u.concat(f<a.length?a.slice(f).map(t):m.ids.slice(y)),a.forEach((T,U)=>{m.entities[t(T)]=T})}return{removeOne:n,removeMany:o,removeAll:i,addOne:v(r),updateOne:v(P),upsertOne:v(function(a,m){return g([a],m)}),setAll:v(function(a,m){return m.entities={},m.ids=[],p(a,m),d.Both}),setOne:v(w),setMany:v(function(a,m){const u=a.map(f=>w(f,m));switch(!0){case u.some(f=>f===d.Both):return d.Both;case u.some(f=>f===d.EntitiesOnly):return d.EntitiesOnly;default:return d.None}}),addMany:v(p),updateMany:v(q),upsertMany:v(g),map:v(function(a,m){return q(m.ids.reduce((f,y)=>{const T=a(m.entities[y]);return T!==m.entities[y]&&f.push({id:y,changes:T}),f},[]),m)}),mapOne:v(function({map:a,id:m},u){const f=u.entities[m];return f?P({id:m,changes:a(f)},u):d.None})}}(s,n):fe(s);return B(B(B({selectId:s,sortComparer:n},o),i),r)}({selectId:t=>t.id,sortComparer:(t,s)=>s.score==t.score?1:s.score-t.score}),Ke=A.getInitialState({}),Re=(0,c.Lq)(Ke,(0,c.on)(ie,(t,{edit:s})=>{const{content:n,id:o}=s;for(const r of Object.values(t.entities)){if(!r)return t;const p=null==r?void 0:r.replies.findIndex(P=>P.id===o);if(-1===p)continue;const O=Y(p,Object.assign(Object.assign({},r.replies[p]),{content:n}),r.replies);return A.updateOne({id:r.id,changes:{replies:O}},t)}return t.entities[o]?A.updateOne({id:o,changes:{content:n}},t):t}),(0,c.on)(se,(t,{commentId:s})=>{for(const o of Object.values(t.entities)){if(!o)return t;const i=null==o?void 0:o.replies.findIndex(w=>w.id===s);if(-1===i)continue;const r=o.replies[i],b=Y(i,Object.assign(Object.assign({},r),{score:r.score+1}),o.replies);return A.updateOne({id:o.id,changes:{replies:b}},t)}const n=t.entities[s];return n?A.updateOne({id:s,changes:{score:n.score+1}},t):t}),(0,c.on)(re,(t,{commentId:s})=>{for(const o of Object.values(t.entities)){if(!o)return t;const i=null==o?void 0:o.replies.findIndex(w=>w.id===s);if(-1===i)continue;const r=o.replies[i],b=Y(i,Object.assign(Object.assign({},r),{score:Math.max(r.score+-1,0)}),o.replies);return A.updateOne({id:o.id,changes:{replies:b}},t)}const n=t.entities[s];return n?A.updateOne({id:s,changes:{score:Math.max(n.score-1,0)}},t):t}),(0,c.on)(oe,(t,{comment:s,commentId:n})=>{for(const i of Object.values(t.entities))if(null==i?void 0:i.replies.find(r=>r.id===n))return A.updateOne({id:i.id,changes:{replies:[...i.replies,s]}},t);const o=t.entities[n];return o?A.updateOne({id:o.id,changes:{replies:[...o.replies,s]}},t):t}),(0,c.on)($,(t,{id:s})=>Object.assign(Object.assign({},t),{deleteId:s})),(0,c.on)(V,(t,{comments:s})=>A.addMany(s,t)),(0,c.on)(ne,(t,{comment:s})=>A.addOne(s,t)),(0,c.on)(te,(t,{id:s})=>{if(t.entities[s])return A.removeOne(s,t);for(const o of Object.values(t.entities))if(o&&0!==o.replies.length&&o.replies.find(r=>r.id===s))return A.updateOne({id:o.id,changes:{replies:o.replies.filter(r=>r.id!==s)}},t);return t})),ge="comments";function Ge(t,s){return(0,c.UY)({comments:Re})(t,s)}const We=(0,c.ZF)(ge),_e=(0,c.P1)(We,t=>t.comments),{selectAll:ze}=A.getSelectors(_e),Ve=(0,c.P1)(_e,t=>t.deleteId);var _=C(9814);const L={duration:300,delayEnter:0,delayLeave:0,timing:"ease-in-out"};function Ce(t){t=Object.assign(Object.assign({},L),t);const{name:s,delayEnter:n,delayLeave:o,duration:i,timing:r}=t;return(0,_.X$)(s||"scaleInOut",[(0,_.SB)("void",(0,_.oB)({transform:"scale(0)"})),(0,_.eR)(":enter",[(0,_.jt)("{{duration}}ms {{delay}}ms {{timing}}")],{params:{delay:n,timing:r,duration:i}}),(0,_.eR)(":leave",[(0,_.jt)("{{duration}}ms {{delay}}ms {{timing}}")],{params:{delay:o,timing:r,duration:i}})])}function he(t){t=Object.assign(Object.assign({},L),t);const{name:s,delayEnter:n,duration:i,timing:r}=t;return(0,_.X$)(s||"slideIn",[(0,_.SB)("void",(0,_.oB)({opacity:0,transform:"translateX(-100%)"})),(0,_.eR)(":enter",[(0,_.jt)("{{duration}}ms {{delay}}ms {{timing}}")],{params:{delay:n,timing:r,duration:i}})])}function et(t){t=Object.assign(Object.assign({},L),t);const{name:s,delayLeave:n,duration:o,timing:i}=t;return(0,_.X$)(s||"slideOut",[(0,_.eR)(":leave",[(0,_.jt)("{{duration}}ms {{delay}}ms {{timing}}"),(0,_.oB)({opacity:0,transform:"translateX(100%)"})],{params:{delay:n,timing:i,duration:o}})])}function ye(t){t=Object.assign(Object.assign({},L),t);const{name:s,delayEnter:n,delayLeave:o,duration:i,timing:r}=t;return(0,_.X$)(s||"fadeInOut",[(0,_.SB)("void",(0,_.oB)({opacity:0})),(0,_.eR)(":enter",(0,_.ru)([(0,_.IO)("*",(0,_.pV)()),(0,_.jt)("{{duration}}ms {{delay}}ms {{timing}}")]),{params:{delay:n,timing:r,duration:i}}),(0,_.eR)(":leave",(0,_.ru)([(0,_.IO)("*",(0,_.pV)()),(0,_.jt)("{{duration}}ms {{delay}}ms {{timing}}")]),{params:{delay:o,timing:r,duration:i}})])}function tt(t,s){1&t&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.Hsn(2,0,["class","block"]),e.qZA(),e.qZA()),2&t&&(e.Q6J("@fadeInOut",void 0),e.xp6(1),e.Q6J("@scaleInOut",void 0))}const nt=["*"];let be=(()=>{class t{constructor(){this.open=!1}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-dialog-ng-content"]],inputs:{open:"open"},ngContentSelectors:nt,decls:1,vars:1,consts:[["class","fixed top-0 left-0l w-full h-screen grid place-content-center bg-black/20",4,"ngIf"],[1,"fixed","top-0","left-0l","w-full","h-screen","grid","place-content-center","bg-black/20"],[1,"container"]],template:function(n,o){1&n&&(e.F$t(),e.YNc(0,tt,3,2,"div",0)),2&n&&e.Q6J("ngIf",o.open)},directives:[M.O5],encapsulation:2,data:{animation:[ye({delayEnter:0,delayLeave:300}),Ce({delayEnter:300,delayLeave:0})]},changeDetection:0}),t})(),ve=(()=>{class t{constructor(){this.confirmed=new e.vpe}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-dialog"]],inputs:{dialog:"dialog"},outputs:{confirmed:"confirmed"},decls:10,vars:3,consts:[[1,"grid","gap-4","bg-white","max-w-sm","p-6","rounded-lg"],[1,"text-lg","font-bold"],[1,"text-muted","text-sm","sm:text-base"],[1,"flex","items-center","justify-center","gap-6"],["type","button",1,"btn","btn-muted","px-4","text-xs","sm:text-base",3,"click"],["type","button",1,"btn","btn-danger","px-4","uppercase","text-xs","sm:text-base",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"h3",1),e._uU(2),e.qZA(),e.TgZ(3,"p",2),e._uU(4),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return o.confirmed.emit(!1)}),e._uU(7," NO, CANCEL "),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){return o.confirmed.emit(!0)}),e._uU(9),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(2),e.Oqu(o.dialog.title),e.xp6(2),e.Oqu(o.dialog.message),e.xp6(5),e.hij(" YES, ",o.dialog.confirmedButtonText," "))},encapsulation:2,changeDetection:0}),t})(),ot=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[M.ez]]}),t})();var x=C(6744),H=C(1478),it=C(7610),st=C(6844),h=C(4753),we=C(9468);function rt(t,s){1&t&&(e.ynx(0),e.TgZ(1,"span",15),e._uU(2,"you"),e.qZA(),e.BQk())}function mt(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",2),e._UZ(1,"ml-content-comment",16),e.TgZ(2,"div",17),e.TgZ(3,"ml-score",18),e.NdJ("up",function(){e.CHM(n);const i=e.oxw();return i.up.emit(i.comment.id)})("down",function(){e.CHM(n);const i=e.oxw();return i.down.emit(i.comment.id)}),e.qZA(),e.TgZ(4,"ml-comment-actions",19),e.NdJ("reply",function(){return e.CHM(n),e.oxw().onReply()})("delete",function(){e.CHM(n);const i=e.oxw();return i.delete.emit(i.comment.id)})("edit",function(){return e.CHM(n),e.oxw().onEdit()}),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("comment",n.comment),e.xp6(2),e.Q6J("disable",n.isYou)("score",n.comment.score),e.xp6(1),e.Q6J("isYou",n.isYou)}}function ct(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"ml-edit-comment",20),e.NdJ("edit",function(i){return e.CHM(n),e.oxw().onUpdate(i)}),e.TgZ(1,"ml-score",21),e.NdJ("up",function(){e.CHM(n);const i=e.oxw();return i.up.emit(i.comment.id)})("down",function(){e.CHM(n);const i=e.oxw();return i.down.emit(i.comment.id)}),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("comment",n.comment),e.xp6(1),e.Q6J("disable",n.isYou)("score",n.comment.score)}}function at(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"ml-enter-comment",22),e.NdJ("enter",function(i){return e.CHM(n),e.oxw().sendReply(i)}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("preWrite",n.replyingTo)("focus",!0)("user",n.myUser)}}let K=(()=>{class t{constructor(){this.reply=new e.vpe,this.delete=new e.vpe,this.edit=new e.vpe,this.up=new e.vpe,this.down=new e.vpe,this.openEditPanel=!1}get user(){return this.comment.user}get avatar(){return this.comment.user.image.png}onEdit(){this.openEditPanel=!0}onReply(){this.replyingTo=this.replyingTo&&confirm(`Are you sure you want to cancel your reply to ${this.comment.user.username} ?`)?void 0:`@${this.comment.user.username} `}get isYou(){return!!this.myUser&&this.comment.user.username===this.myUser.username}sendReply(n){this.replyingTo=void 0,this.reply.emit({myUser:this.myUser,content:n.substring(n.indexOf(" ")).trim(),toUserName:this.user.username,toCommentId:this.comment.id})}get content(){const n=this.comment.replyingTo;return`${n?"@"+n+" ":""}${this.comment.content}`}onUpdate(n){this.openEditPanel=!1,n!==this.comment.content&&this.edit.emit({id:this.comment.id,content:n})}identifyComment(n,o){return o.id}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-comment"]],inputs:{comment:"comment",myUser:"myUser"},outputs:{reply:"reply",delete:"delete",edit:"edit",up:"up",down:"down"},decls:19,vars:15,consts:[[1,"flex","flex-col","p-4","bg-white","rounded-lg","md:flex-row","md:gap-6","md:p-6"],["direction","vertical",1,"hidden","md:block",3,"disable","score","up","down"],[1,"grid","w-full","gap-4"],[1,"flex","items-center","gap-4"],[1,"w-10","h-10","rounded-full",3,"src","alt"],[1,"flex","items-center","gap-2"],["routerLink","/",1,"font-black"],[4,"ngIf"],[1,"text-sm","md:text-base"],[1,"hidden","ml-auto","md:block",3,"isYou","reply","delete","edit"],["class","grid w-full gap-4",4,"ngIf"],[3,"comment","edit",4,"ngIf"],["submitButtonName","reply","class","block mt-4",3,"preWrite","focus","user","enter",4,"ngIf"],[1,"grid","gap-4","pl-4","mt-4","border-l-2","border-gray-200","md:pl-8","md:ml-8","lg:ml-10","lg:pl-10","lg:mt-6"],[3,"myUser","comments","reply","delete","up","down","edit"],[1,"badge-primary"],[3,"comment"],[1,"flex","items-center","justify-between","md:hidden"],[3,"disable","score","up","down"],[3,"isYou","reply","delete","edit"],[3,"comment","edit"],[1,"md:hidden",3,"disable","score","up","down"],["submitButtonName","reply",1,"block","mt-4",3,"preWrite","focus","user","enter"]],template:function(n,o){1&n&&(e.TgZ(0,"div"),e.TgZ(1,"div",0),e.TgZ(2,"ml-score",1),e.NdJ("up",function(){return o.up.emit(o.comment.id)})("down",function(){return o.down.emit(o.comment.id)}),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e._UZ(5,"img",4),e.TgZ(6,"div",5),e.TgZ(7,"a",6),e._uU(8),e.qZA(),e.YNc(9,rt,3,0,"ng-container",7),e.qZA(),e.TgZ(10,"p",8),e._uU(11),e.ALo(12,"mlTimestampToDateFormat"),e.qZA(),e.TgZ(13,"ml-comment-actions",9),e.NdJ("reply",function(){return o.onReply()})("delete",function(){return o.delete.emit(o.comment.id)})("edit",function(){return o.onEdit()}),e.qZA(),e.qZA(),e.YNc(14,mt,5,4,"div",10),e.YNc(15,ct,2,3,"ml-edit-comment",11),e.qZA(),e.qZA(),e.YNc(16,at,1,3,"ml-enter-comment",12),e.TgZ(17,"div",13),e.TgZ(18,"ml-comment-list",14),e.NdJ("reply",function(r){return o.reply.emit(r)})("delete",function(r){return o.delete.emit(r)})("up",function(r){return o.up.emit(r)})("down",function(r){return o.down.emit(r)})("edit",function(r){return o.edit.emit(r)}),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(2),e.Q6J("disable",o.isYou)("score",o.comment.score),e.xp6(3),e.Q6J("src",o.avatar,e.LSH)("alt",o.user.username),e.xp6(3),e.Oqu(o.user.username),e.xp6(1),e.Q6J("ngIf",o.isYou),e.xp6(2),e.Oqu(e.lcZ(12,13,o.comment.createdAtTimestamp)),e.xp6(2),e.Q6J("isYou",o.isYou),e.xp6(1),e.Q6J("ngIf",!o.openEditPanel),e.xp6(1),e.Q6J("ngIf",o.openEditPanel),e.xp6(1),e.Q6J("ngIf",o.replyingTo),e.xp6(2),e.Q6J("myUser",o.myUser)("comments",o.comment.replies))},encapsulation:2,changeDetection:0}),t})();function lt(t,s){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"ml-comment",2),e.NdJ("reply",function(i){return e.CHM(n),e.oxw().reply.emit(i)})("delete",function(i){return e.CHM(n),e.oxw().delete.emit(i)})("edit",function(i){return e.CHM(n),e.oxw().edit.emit(i)})("up",function(i){return e.CHM(n),e.oxw().up.emit(i)})("down",function(i){return e.CHM(n),e.oxw().down.emit(i)}),e.qZA(),e.BQk()}if(2&t){const n=s.$implicit,o=e.oxw();e.xp6(1),e.Q6J("@slideOut",void 0)("@slideIn",void 0)("myUser",o.myUser)("comment",n)}}let R=(()=>{class t{constructor(){this.delete=new e.vpe,this.reply=new e.vpe,this.up=new e.vpe,this.down=new e.vpe,this.edit=new e.vpe}identifyComment(n,o){return o.id}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-comment-list"]],inputs:{comments:"comments",myUser:"myUser"},outputs:{delete:"delete",reply:"reply",up:"up",down:"down",edit:"edit"},decls:2,vars:3,consts:[[1,"grid","gap-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"myUser","comment","reply","delete","edit","up","down"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e.YNc(1,lt,2,4,"ng-container",1),e.qZA()),2&n&&(e.Q6J("@listAnimation",void 0),e.xp6(1),e.Q6J("ngForOf",o.comments)("ngForTrackBy",o.identifyComment))},directives:[M.sg,K],encapsulation:2,data:{animation:[(0,_.X$)("listAnimation",[(0,_.eR)("* => *",[(0,_.IO)(":enter",[(0,_.oB)({opacity:.1,transform:"translateY(-100%)"}),(0,_.EY)(200,[(0,_.jt)("0.5s")])],{optional:!0})])]),et({delayLeave:1200}),he({delayEnter:100})]},changeDetection:0}),t})();function Te(t){return function(s){const n=s.value;return n.length===t.length?{persist:!0}:n.substring(0,t.length)!==t?(s.setValue(t),{persist:!0}):null}}const ut=["textarea"];function dt(t,s){if(1&t&&(e.TgZ(0,"a",8),e.TgZ(1,"div"),e._UZ(2,"img",9),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("src",n.avatar,e.LSH)("alt",n.user.username)}}function pt(t,s){if(1&t&&(e.TgZ(0,"a",10),e._UZ(1,"img",11),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("src",n.avatar,e.LSH)("alt",n.user.username)}}let X=(()=>{class t{constructor(n){this._fb=n,this.submitButtonName="Send",this.preWrite="",this.focus=!1,this.enter=new e.vpe}ngAfterViewInit(){this.focus&&this.textarea.nativeElement.focus()}ngOnInit(){this.form=this._fb.group({comment:[this.preWrite,[S.kI.required,Te(this.preWrite)]]})}get avatar(){return this.user.image.webp}onSubmit(n){if(n.preventDefault(),this.form.invalid)return;const o=this.form.value.comment;o!==this.preWrite?(this.enter.emit(o),this.form.reset({comment:""})):alert("Please enter a comment")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(S.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-enter-comment"]],viewQuery:function(n,o){if(1&n&&e.Gf(ut,5),2&n){let i;e.iGM(i=e.CRH())&&(o.textarea=i.first)}},inputs:{submitButtonName:"submitButtonName",user:"user",preWrite:"preWrite",focus:"focus"},outputs:{enter:"enter"},decls:11,vars:7,consts:[[1,"flex","flex-col","gap-8","bg-white","p-4","mb-20","rounded-md-","md:flex-row","md:gap-5","md:p-6",3,"formGroup","ngSubmit"],["class","hidden md:!block","routerLink","/",4,"ngIf"],["formControlName","comment","placeholder","Add a comment..","cols","30","rows","3",1,"block","resize-none"],["textarea",""],[1,"hidden","md:block"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"flex","justify-between","items-center","md:hidden"],["routerLink","/",4,"ngIf"],["routerLink","/",1,"hidden","md:!block"],[1,"min-w-10","min-h-10","rounded-full",3,"src","alt"],["routerLink","/"],[1,"w-10","h-10","rounded-full",3,"src","alt"]],template:function(n,o){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(r){return o.onSubmit(r)}),e.YNc(1,dt,3,2,"a",1),e._UZ(2,"textarea",2,3),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.YNc(8,pt,2,2,"a",7),e.TgZ(9,"button",5),e._uU(10),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("ngIf",o.user),e.xp6(4),e.Q6J("disabled",o.form.invalid),e.xp6(1),e.hij(" ",o.submitButtonName," "),e.xp6(2),e.Q6J("ngIf",o.user),e.xp6(1),e.Q6J("disabled",o.form.invalid),e.xp6(1),e.hij(" ",o.submitButtonName," "))},directives:[S._Y,S.JL,S.sg,M.O5,S.Fj,S.JJ,S.u,H.yS],encapsulation:2,changeDetection:0}),t})(),xe=(()=>{class t{constructor(){this.open=!1,this.deleted=new e.vpe,this.dialog={title:"Delete comment",message:"Are you sure you want to delete this comment? This will remove the comment and can't be undone.",confirmedButtonText:"delete"}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-delete-dialog"]],inputs:{open:"open"},outputs:{deleted:"deleted"},decls:2,vars:2,consts:[[1,"fixed",3,"open"],[3,"dialog","confirmed"]],template:function(n,o){1&n&&(e.TgZ(0,"ml-dialog-ng-content",0),e.TgZ(1,"ml-dialog",1),e.NdJ("confirmed",function(r){return o.deleted.emit(r)}),e.qZA(),e.qZA()),2&n&&(e.Q6J("open",o.open),e.xp6(1),e.Q6J("dialog",o.dialog))},directives:[be,ve],encapsulation:2,data:{animation:[ye({delayEnter:0,delayLeave:300}),Ce({delayEnter:300,delayLeave:0})]},changeDetection:0}),t})();function ft(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"main",1),e.TgZ(1,"div",2),e.TgZ(2,"ml-comment-list",3),e.NdJ("reply",function(i){return e.CHM(n),e.oxw().addReply(i)})("delete",function(i){return e.CHM(n),e.oxw().requestDeleteComment(i)})("up",function(i){return e.CHM(n),e.oxw().upScore(i)})("down",function(i){return e.CHM(n),e.oxw().downScore(i)})("edit",function(i){return e.CHM(n),e.oxw().editComment(i)}),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"ml-enter-comment",4),e.NdJ("enter",function(i){return e.CHM(n),e.oxw().addComment(i)}),e.qZA(),e.qZA(),e.TgZ(5,"ml-delete-dialog",5),e.NdJ("deleted",function(i){return e.CHM(n),e.oxw().onConfirmDelete(i)}),e.ALo(6,"async"),e.qZA(),e.qZA()}if(2&t){const n=s.ngIf,o=e.oxw();e.xp6(2),e.Q6J("myUser",n)("comments",e.lcZ(3,5,o.comments$)),e.xp6(2),e.Q6J("@slideIn",void 0)("user",n),e.xp6(1),e.Q6J("open",e.lcZ(6,7,o.openDeletePopup$))}}const gt=[{path:"",component:(()=>{class t{constructor(n){this._store=n,this.comments$=n.select(ze),this.user$=n.select(st.dy),this.deleteId$=n.select(Ve),this.openDeletePopup$=this.deleteId$.pipe((0,h.U)(o=>!!o))}ngOnInit(){this._store.dispatch(it.p.login({credentials:{username:"fake"}})),this._store.dispatch(me())}requestDeleteComment(n){this._store.dispatch($({id:n}))}onConfirmDelete(n){n&&this.deleteId$.pipe((0,we.q)(1)).subscribe(o=>{console.log(o),this._store.dispatch(ce({id:o}))}),this._store.dispatch($({id:void 0}))}addComment(n){this.user$.pipe((0,we.q)(1)).subscribe(o=>{!o||this._store.dispatch(ae({user:o,content:n}))})}addReply(n){this._store.dispatch(le({replyDto:n}))}upScore(n){this._store.dispatch(de({commentId:n}))}downScore(n){this._store.dispatch(pe({commentId:n}))}editComment(n){this._store.dispatch(ue({edit:n}))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-view-comments-page"]],decls:2,vars:3,consts:[["class","mt-6 md:mt-10",4,"ngIf"],[1,"mt-6","md:mt-10"],[1,"container","max-w-4xl"],[3,"myUser","comments","reply","delete","up","down","edit"],[1,"block","mt-10","mb-40",3,"user","enter"],[1,"fixed",3,"open","deleted"]],template:function(n,o){1&n&&(e.YNc(0,ft,7,9,"main",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,o.user$))},directives:[M.O5,R,X,xe],pipes:[M.Ov],encapsulation:2,data:{animation:[he({delayEnter:1e3})]},changeDetection:0}),t})()}];let _t=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[H.Bz.forChild(gt)],H.Bz]}),t})(),Oe=(()=>{class t{constructor(){this.name="reply",this.disable=!1}get src(){return`assets/images/icon-${this.name}.svg`}get textColor(){return"delete"===this.name?"text-danger":"text-primary"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-button"]],inputs:{name:"name",disable:"disable"},decls:5,vars:9,consts:[["type","button",3,"disabled"],[3,"src","alt"]],template:function(n,o){1&n&&(e.TgZ(0,"button",0),e._UZ(1,"img",1),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e.qZA()),2&n&&(e.Gre("font-black text-sm inline-flex gap-2 items-center ",o.textColor,"  duration-150 hover:opacity-50"),e.Q6J("disabled",o.disable),e.xp6(1),e.Q6J("src",o.src,e.LSH)("alt",o.name),e.xp6(2),e.Oqu(e.lcZ(4,7,o.name)))},pipes:[M.rS],encapsulation:2,changeDetection:0}),t})(),G=(()=>{class t{constructor(n){this._elementRef=n,this.focus=!1}ngOnInit(){this.focus&&this._elementRef.nativeElement.focus()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(e.SBq))},t.\u0275dir=e.lG2({type:t,selectors:[["","focus",""]],inputs:{focus:"focus"}}),t})();const ht=["*"];let Ae=(()=>{class t{constructor(){this.edit=new e.vpe}ngOnInit(){this.formControl=new S.NI(this.content,[Te(this.replyingTo)])}get content(){return this.replyingTo+this.comment.content}get replyingTo(){return this.comment.replyingTo?`@${this.comment.replyingTo} `:""}formatCommentToUpdate(n){return this.comment.replyingTo?n.substring(n.indexOf(" ")).trim():n}onUpdate(){const n=this.formControl.value;if(""==n)return alert("Comment cannot be empty");this.edit.emit(this.formatCommentToUpdate(n))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-edit-comment"]],inputs:{comment:"comment"},outputs:{edit:"edit"},ngContentSelectors:ht,decls:6,vars:3,consts:[[1,"grid","gap-4"],["cols","30","rows","6",1,"overflow-visible",3,"focus","formControl"],[1,"flex","items-center","justify-between","md:justify-end"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(n,o){1&n&&(e.F$t(),e.TgZ(0,"div",0),e._UZ(1,"textarea",1),e.TgZ(2,"div",2),e.Hsn(3),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onUpdate()}),e._uU(5," Update "),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("focus",!0)("formControl",o.formControl),e.xp6(3),e.Q6J("disabled",o.formControl.invalid))},directives:[S.Fj,G,S.JJ,S.oH],encapsulation:2,changeDetection:0}),t})(),Se=(()=>{class t{constructor(){this.min=0,this.max=1e4,this.disable=!1,this.direction="horizontal",this.up=new e.vpe,this.down=new e.vpe}ngOnInit(){this.hasBeenDownScore=!1,this.hasBeenUpScore=!1}get disableMinus(){return this.disable||this.hasBeenDownScore||this.score===this.min}get disablePlus(){return this.disable||this.hasBeenUpScore||this.score===this.max}upScore(){this.hasBeenUpScore||(this.up.emit(),this.hasBeenUpScore=!0)}downScore(){this.hasBeenDownScore||(this.down.emit(),this.hasBeenDownScore=!0)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-score"]],inputs:{score:"score",min:"min",max:"max",disable:"disable",direction:"direction"},outputs:{up:"up",down:"down"},decls:7,vars:6,consts:[["type","button",1,"text-gray-400","px-2","disabled:opacity-20","hover:text-primary",3,"disabled","click"],[1,"fas","fa-plus"],[1,"text-primary","text-lg","font-black"],[1,"fas","fa-minus"]],template:function(n,o){1&n&&(e.TgZ(0,"div"),e.TgZ(1,"button",0),e.NdJ("click",function(){return o.upScore()}),e._UZ(2,"i",1),e.qZA(),e.TgZ(3,"p",2),e._uU(4),e.qZA(),e.TgZ(5,"button",0),e.NdJ("click",function(){return o.downScore()}),e._UZ(6,"i",3),e.qZA(),e.qZA()),2&n&&(e.Gre("inline-flex items-center gap-2 bg-muted p-2 rounded-lg ","vertical"===o.direction?"flex-col":"flex-row"," "),e.xp6(1),e.Q6J("disabled",o.disablePlus),e.xp6(3),e.Oqu(o.score),e.xp6(1),e.Q6J("disabled",o.disableMinus))},encapsulation:2,changeDetection:0}),t})();function yt(t,s){if(1&t&&(e.TgZ(0,"a",2),e._uU(1),e.qZA()),2&t){const n=s.ngIf;e.xp6(1),e.hij(" @",n," ")}}let Me=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-content-comment"]],inputs:{comment:"comment"},decls:4,vars:2,consts:[[1,"text-muted"],["routerLink","/","class","font-black text-primary",4,"ngIf"],["routerLink","/",1,"font-black","text-primary"]],template:function(n,o){1&n&&(e.TgZ(0,"p",0),e.YNc(1,yt,2,1,"a",1),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",o.comment.replyingTo),e.xp6(2),e.Oqu(o.comment.content))},directives:[M.O5,H.yS],encapsulation:2,changeDetection:0}),t})();function bt(t,s){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"ml-button",3),e.NdJ("click",function(){return e.CHM(n),e.oxw().delete.emit()}),e.qZA(),e.TgZ(2,"ml-button",4),e.NdJ("click",function(){return e.CHM(n),e.oxw().edit.emit()}),e.qZA(),e.BQk()}}function vt(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"ml-button",5),e.NdJ("click",function(){return e.CHM(n),e.oxw().reply.emit()}),e.qZA()}}let Ue=(()=>{class t{constructor(){this.delete=new e.vpe,this.edit=new e.vpe,this.reply=new e.vpe}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ml-comment-actions"]],inputs:{isYou:"isYou"},outputs:{delete:"delete",edit:"edit",reply:"reply"},decls:4,vars:2,consts:[[1,"inline-flex","gap-4"],[4,"ngIf","ngIfElse"],["replyButton",""],["name","delete",3,"click"],["name","edit",3,"click"],["name","reply",3,"click"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,bt,3,0,"ng-container",1),e.YNc(2,vt,1,0,"ng-template",null,2,e.W1O),e.qZA()),2&n){const i=e.MAs(3);e.xp6(1),e.Q6J("ngIf",o.isYou)("ngIfElse",i)}},directives:[M.O5,Oe],encapsulation:2,changeDetection:0}),t})();var N=C(2997),D=C(9757),J=C(2835);const wt={currentUser:{image:{png:"assets/images/avatars/image-juliusomo.png",webp:"assets/images/avatars/image-juliusomo.webp"},username:"juliusomo"},comments:[{id:0,content:"Impressive! Though it seems the drag feature could be improved. But overall it looks incredible. You've nailed the design and the responsiveness at various breakpoints works really well.",createdAtTimestamp:new Date("2022-05-05T12:30:00Z").getTime(),score:12,user:{image:{png:"assets/images/avatars/image-amyrobson.png",webp:"assets/images/avatars/image-amyrobson.webp"},username:"amyrobson"},replies:[]},{id:1,content:"Woah, your project looks awesome! How long have you been coding for? I'm still new, but think I want to dive into React as well soon. Perhaps you can give me an insight on where I can learn React? Thanks!",createdAtTimestamp:new Date("2022-05-22T11:20:00Z").getTime(),score:5,user:{image:{png:"assets/images/avatars/image-maxblagun.png",webp:"assets/images/avatars/image-maxblagun.webp"},username:"maxblagun"},replies:[{id:2,content:"If you're still new, I'd recommend focusing on the fundamentals of HTML, CSS, and JS before considering React. It's very tempting to jump ahead but lay a solid foundation first.",createdAtTimestamp:new Date("2022-05-29T14:20:00Z").getTime(),score:4,replyingTo:"maxblagun",user:{image:{png:"assets/images/avatars/image-ramsesmiron.png",webp:"assets/images/avatars/image-ramsesmiron.webp"},username:"ramsesmiron"},replies:[]},{id:3,content:"I couldn't agree more with this. Everything moves so fast and it always seems like everyone knows the newest library/framework. But the fundamentals are what stay constant.",createdAtTimestamp:new Date("2022-06-03T18:05:00Z").getTime(),score:2,replyingTo:"ramsesmiron",user:{image:{png:"assets/images/avatars/image-juliusomo.png",webp:"assets/images/avatars/image-juliusomo.webp"},username:"juliusomo"},replies:[]}]}]};var Tt=C(9433),k=C(7384),Ee=C(8100);const Zt=new e.OlP("comments-app-local-storage",{factory:function(){return void 0===typeof window||void 0===typeof localStorage?null:localStorage}});let Ot=(()=>{class t{constructor(n){this.storage=n,this.commentsKey="comments"}supported(){return null!==this.storage?(0,N.of)(!0):(0,Tt._)(()=>"Local Storage Not Supported")}save(n){this.storage.setItem(this.commentsKey,JSON.stringify(n))}getComments(){return this.supported().pipe((0,h.U)(()=>this.storage.getItem(this.commentsKey)),(0,h.U)(n=>n?JSON.parse(n):wt.comments))}deleteComment(n){return this.getComments().pipe((0,h.U)(o=>o.filter(i=>i.id!==n)),(0,h.U)(o=>o.map(i=>Object.assign(Object.assign({},i),{replies:i.replies.filter(r=>r.id!==n)}))),(0,k.b)(o=>this.save(o)),(0,h.U)(()=>!0))}_createId(){return this.getComments().pipe((0,h.U)(n=>n.length+n.reduce((o,i)=>o+i.replies.length,0)))}_generateComment(n,o,i){return this._createId().pipe((0,h.U)(r=>({id:r,user:n,content:o,score:0,replyingTo:i,replies:[],createdAtTimestamp:(new Date).getTime()})))}addComment(n,o){return(0,Ee.D)([this.getComments(),this._generateComment(n,o)]).pipe((0,h.U)(([i,r])=>({comments:[...i,r],comment:r})),(0,h.U)(({comments:i,comment:r})=>({comments:i.sort((p,b)=>b.score===p.score?1:b.score-p.score),comment:r})),(0,k.b)(({comments:i})=>this.save(i)),(0,h.U)(({comment:i})=>i))}addReply(n){const{content:o,toUserName:i,myUser:r,toCommentId:p}=n;return(0,Ee.D)([this.getComments(),this._generateComment(r,o,i)]).pipe((0,h.U)(([b,w])=>({comments:b.map(O=>Object.assign(Object.assign({},O),{replies:O.id===p?[...O.replies,w]:O.replies})),reply:w})),(0,h.U)(({comments:b,reply:w})=>({comments:b.map(O=>O.replies.find(j=>j.id===p)?Object.assign(Object.assign({},O),{replies:[...O.replies,w]}):O),reply:w})),(0,k.b)(({comments:b})=>this.save(b)),(0,h.U)(({reply:w})=>({commentId:p,comment:w})))}editComment(n){const{id:o,content:i}=n;return this.getComments().pipe((0,h.U)(r=>r.map(p=>Object.assign(Object.assign({},p),{content:p.id===o?i:p.content}))),(0,h.U)(r=>r.map(p=>Object.assign(Object.assign({},p),{replies:p.replies.map(b=>Object.assign(Object.assign({},b),{content:b.id===o?i:b.content}))}))),(0,k.b)(r=>this.save(r)),(0,h.U)(()=>!0))}upScore(n){return this.getComments().pipe((0,h.U)(o=>o.map(i=>Object.assign(Object.assign({},i),{score:i.id===n?i.score+1:i.score}))),(0,h.U)(o=>o.map(i=>Object.assign(Object.assign({},i),{replies:i.replies.map(r=>Object.assign(Object.assign({},r),{score:r.id===n?r.score+1:r.score}))}))),(0,k.b)(o=>this.save(o)),(0,h.U)(()=>!0))}downScore(n){return this.getComments().pipe((0,h.U)(o=>o.map(i=>Object.assign(Object.assign({},i),{score:i.id===n?Math.max(i.score-1,0):i.score}))),(0,h.U)(o=>o.map(i=>Object.assign(Object.assign({},i),{replies:i.replies.map(r=>Object.assign(Object.assign({},r),{score:r.id===n?Math.max(r.score-1,0):r.score}))}))),(0,k.b)(o=>this.save(o)),(0,h.U)(()=>!0))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(Zt))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),At=(()=>{class t{constructor(n,o){this._actions$=n,this._commentsService=o,this.loadComments$=(0,x.GW)(()=>this._actions$.pipe((0,x.l4)(me),(0,D.z)(()=>this._commentsService.getComments().pipe((0,h.U)(i=>V({comments:i})),(0,J.K)(i=>(0,N.of)(ee({error:i}))))))),this.deleteComment$=(0,x.GW)(()=>this._actions$.pipe((0,x.l4)(ce),(0,D.z)(({id:i})=>this._commentsService.deleteComment(i).pipe((0,h.U)(()=>te({id:i})),(0,J.K)(r=>(0,N.of)(ee({error:r}))))))),this.addComment$=(0,x.GW)(()=>this._actions$.pipe((0,x.l4)(ae),(0,D.z)(({user:i,content:r})=>this._commentsService.addComment(i,r).pipe((0,h.U)(p=>ne({comment:p})),(0,J.K)(p=>(0,N.of)(De({error:p}))))))),this.addReply$=(0,x.GW)(()=>this._actions$.pipe((0,x.l4)(le),(0,D.z)(({replyDto:i})=>this._commentsService.addReply(i).pipe((0,h.U)(({commentId:r,comment:p})=>oe({comment:p,commentId:r})),(0,J.K)(r=>(0,N.of)(Je({error:r}))))))),this.editComment$=(0,x.GW)(()=>this._actions$.pipe((0,x.l4)(ue),(0,D.z)(({edit:i})=>this._commentsService.editComment(i).pipe((0,h.U)(r=>ie({edit:i})),(0,J.K)(r=>(0,N.of)(Fe({error:r}))))))),this.upScore$=(0,x.GW)(()=>this._actions$.pipe((0,x.l4)(de),(0,D.z)(({commentId:i})=>this._commentsService.upScore(i).pipe((0,h.U)(r=>se({commentId:i})),(0,J.K)(r=>(0,N.of)(Be({error:r}))))))),this.downScore$=(0,x.GW)(()=>this._actions$.pipe((0,x.l4)(pe),(0,D.z)(({commentId:i})=>this._commentsService.downScore(i).pipe((0,h.U)(r=>re({commentId:i})),(0,J.K)(r=>(0,N.of)(ke({error:r})))))))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(x.eX),e.LFG(Ot))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),Ie=(()=>{class t{constructor(){}transform(n){const o=new Date(n);return`${o.getDate()}/${o.getMonth()+1}/${o.getFullYear()} ${o.getHours()}:${o.getMinutes()}`}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"mlTimestampToDateFormat",type:t,pure:!0}),t})(),St=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[M.ez,_t,S.UX,ot,c.Aw.forFeature(ge,Ge),x.sQ.forFeature([At])]]}),t})();e.B6R(K,[Se,H.yS,M.O5,Ue,Me,Ae,X,G,R],[Ie])}}]);